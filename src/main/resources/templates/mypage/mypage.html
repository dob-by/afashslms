<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout(~{::body})}">
<head>
    <meta charset="UTF-8">
    <title>λ§μ΄νμ΄μ§€</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/profile.css">
</head>
<body class="d-flex flex-column min-vh-100">
<main class="container my-5 flex-grow-1">

    <!-- β… λ‚΄ μ •λ³΄ μΉ΄λ“ -->
    <div class="profile-card mb-4">
        <div class="profile-icon-box">π‘¤</div>
        <div class="profile-info">
            <h5 class="text-success fw-bold">λ‚΄ μ •λ³΄</h5>
            <p><strong class="text-dark">μ΄λ¦„:</strong> <span th:text="${username}">μ΄λ¦„</span></p>
            <p><strong class="text-dark">μ΄λ©”μΌ:</strong> <span th:text="${email}">email@example.com</span></p>
            <p><strong class="text-dark">μ—­ν• :</strong> <span th:text="${userRole}">STUDENT</span></p>
        </div>
    </div>

    <!-- π’» λ…ΈνΈλ¶ μ •λ³΄ -->
    <div th:if="${userRole == 'STUDENT' and laptop != null}">
        <h5 class="section-title">π’» λ‚΄ λ…ΈνΈλ¶ μ •λ³΄</h5>
        <div class="card-custom mb-4">
            <p><strong>λ¨λΈλ…:</strong> <span th:text="${laptop.model}">Dell XPS 13</span></p>
            <p><strong>μΌλ ¨λ²νΈ:</strong> <span th:text="${laptop.serialNumber}">SN-123456</span></p>
            <p><strong>λ€μ—¬μΌμ:</strong> <span th:text="${#temporals.format(laptop.issuedAt, 'yyyy-MM-dd')}">2025-03-01</span></p>
        </div>
    </div>

    <!-- π“ λ³΄μ  μ΄λ ¥ -->
    <div th:if="${userRole == 'STUDENT' and laptopHistory != null}">
        <h5 class="section-title">π“ λ…ΈνΈλ¶ λ³΄μ  μ΄λ ¥</h5>
        <div class="table-responsive">
            <table class="table table-bordered table-hover table-custom">
                <thead>
                <tr>
                    <th>λ¨λΈλ…</th>
                    <th>μΌλ ¨λ²νΈ</th>
                    <th>λ³΄μ  μ‹μ‘μΌ</th>
                    <th>λ°λ‚©μΌ</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="history : ${laptopHistory}">
                    <td th:text="${history.model}">Dell XPS</td>
                    <td th:text="${history.serialNumber}">SN-000000</td>
                    <td th:text="${#temporals.format(history.startDate, 'yyyy-MM-dd')}">2025-01-01</td>
                    <td th:text="${#temporals.format(history.endDate, 'yyyy-MM-dd')}">2025-03-01</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- π›  μλ¦¬ μ”μ²­ λ‚΄μ—­ -->
    <div th:if="${userRole == 'STUDENT'}">
        <h5 class="section-title">π›  μλ¦¬ μ”μ²­ λ‚΄μ—­</h5>
        <div class="table-responsive">
            <table class="table table-bordered table-hover table-custom text-center align-middle">
                <thead>
                <tr>
                    <th>μ”μ²­μΌ</th>
                    <th>μλ¦¬λ‚΄μ©</th>
                    <th>μƒνƒ</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="repair : ${repairs}">
                    <td th:text="${#temporals.format(repair.createdAt, 'yyyy-MM-dd')}">2025-04-12</td>
                    <td th:text="${repair.description}">λ°°ν„°λ¦¬ κµμ²΄</td>
                    <td th:text="${repair.status}">μ™„λ£</td>
                </tr>
                <tr th:if="${repairs == null or repairs.isEmpty()}">
                    <td colspan="3" class="text-center text-muted">μλ¦¬ μ”μ²­ λ‚΄μ—­μ΄ μ—†μµλ‹λ‹¤.</td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="alert alert-info mt-3" role="alert">
            π› οΈ μλ¦¬ μ”μ²­ λ‚΄μ©μ μμ • λ° μ‚­μ λ” <strong>μƒλ‹¨ λ©”λ‰΄μ <a th:href="@{/repairs}" class="alert-link">[μλ¦¬μ”μ²­]</a> νƒ­</strong>μ—μ„ κ°€λ¥ν•©λ‹λ‹¤.
        </div>
    </div>

    <!-- π‘©β€π’Ό κ΄€λ¦¬μ μ•λ‚΄ -->
    <div th:if="${userRole == 'MID_ADMIN' or userRole == 'TOP_ADMIN'}" class="mt-5">
        <h5 class="section-title">π”§ κ΄€λ¦¬μ μ•λ‚΄</h5>
        <div class="admin-alert">
            μ΄ νμ΄μ§€μ—μ„λ” κ΄€λ¦¬μ μ •λ³΄λ§ κ°„λ‹¨ν ν‘μ‹λ©λ‹λ‹¤.<br>
            λ…ΈνΈλ¶/μ‚¬μ©μ κ΄€λ¦¬λ” μƒλ‹¨ λ©”λ‰΄μ—μ„ μ ‘κ·Όν•΄μ£Όμ„Έμ”.
        </div>
    </div>

</main>
</body>
</html>