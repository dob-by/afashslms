<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6"
      th:replace="~{layout :: layout(~{::body})}">
<head>
    <meta charset="UTF-8">
    <title th:text="${notice.title}">κ³µμ§€μ‚¬ν•­ μƒμ„Έ</title>
</head>
<body>
<div class="max-w-3xl mx-auto px-4 com.afashslms.demo.rag_server.py-4">

    <!-- κ³µμ§€ μΉ΄λ“ -->
    <div class="card shadow-sm p-4 mb-4">
        <h2 class="fw-bold mb-2 text-dark" th:text="${notice.title}">κ³µμ§€ μ λ©</h2>
        <p class="text-muted small mb-3">
            μ‘μ„±μ: <strong th:text="${notice.author.username}">μ‘μ„±μ</strong> |
            μ‘μ„±μΌ: <span th:text="${#dates.format(notice.createdAt, 'yyyy-MM-dd HH:mm')}"></span>
        </p>
        <hr>
        <div class="fs-6 lh-lg mb-4" style="white-space: pre-wrap;" th:text="${notice.content}">
            κ³µμ§€ λ‚΄μ©
        </div>

        <!-- μ²¨λ¶€νμΌ -->
        <div class="bg-light-subtle p-3 rounded mb-3" th:if="${notice.storedFileName != null}">
            π“ <a th:href="@{|/uploads/notices/${notice.storedFileName}|}"
                 th:download="${notice.originalFileName}"
                 th:text="${notice.originalFileName}"
                 style="text-decoration: none; color: #2e7d32;">νμΌ λ‹¤μ΄λ΅λ“</a>
        </div>

        <!-- κ΄€λ¦¬μ μ „μ© λ²„νΌ -->
        <div class="d-flex gap-2 flex-wrap" th:if="${#authorization.expression('hasAnyRole(''MID_ADMIN'',''TOP_ADMIN'')')}">
            <a th:href="@{|/notices/${notice.id}/edit|}" class="btn btn-outline-success btn-sm">μμ •</a>
            <form th:action="@{|/notices/${notice.id}/delete|}" method="post">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                <button type="submit" class="btn btn-outline-danger btn-sm" onclick="return confirm('μ •λ§ μ‚­μ ν•μ‹κ² μµλ‹κΉ?')">μ‚­μ </button>
            </form>
        </div>

        <div class="text-end mt-3">
            <a th:href="@{/notices}" class="btn btn-outline-secondary btn-sm">β† λ©λ΅μΌλ΅</a>
        </div>
    </div>

</div>
</body>
</html>